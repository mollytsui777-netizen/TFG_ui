# TalkingGaussian UI System - Evaluation Dockerfile
# 评测专用镜像（复用主镜像，只是入口不同）
# 使用方法：docker run --gpus all -v /path/to/pred:/app/pred -v /path/to/gt:/app/gt tfg_ui:eval

FROM tfg_ui:latest

# 设置工作目录
WORKDIR /app

# 确保评测脚本有执行权限（主镜像已复制，这里只是确保权限）
RUN chmod +x TalkingGaussian/evaluation/run_eval.sh && \
    chmod +x TalkingGaussian/evaluation/run_eval_from_system.sh && \
    chmod +x TalkingGaussian/evaluation/*.sh 2>/dev/null || true

# 默认命令：运行评测脚本（使用新的 run_eval.sh）
# 使用方法：
#   docker run --gpus all -v /path/to/pred:/app/pred -v /path/to/gt:/app/gt \
#     tfg_ui:eval --pred-video /app/pred/video.mp4 --gt-video /app/gt/video.mp4 --all
ENTRYPOINT ["bash", "TalkingGaussian/evaluation/run_eval.sh"]


